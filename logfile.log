---------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\demet\Desktop\project\Stata\Lectures\Lecture2\assignment1.l
> og
  log type:  text
 opened on:  23 Feb 2026, 10:49:10

. 
. clear all

. set seed 12345

. 
. set obs 3200
Number of observations (_N) was 0, now 3,200.

. gen x = runiform()

. gen z = runiform()

. 
. foreach i of numlist 40 120 400 3200 {
  2. 
.         tempfile mc`i'
  3.         local j = 1
  4.         while `j' <= 2000{
  5.                 quietly{
  6.                         preserve
  7.                         sample `i', count
  8.                         noisily di "." _continue
  9.                         
.                         gen e = (invnorm(uniform()))^2
 10.                         sum e
 11.                         replace e = e - r(mean)
 12.                         
.                         gen y = 1.2 + 1.2*x + 0.8*z + e
 13.                         
.                         reg y x z
 14.                         
.                         matrix b = e(b)
 15.                         svmat b, name(ols`i')
 16.                         collapse (mean) ols*
 17.                         
.                         if `j' > 1{
 18.                                 append using `mc`i''
 19.                         }
 20.                         save `mc`i'', replace
 21.                         restore
 22.                         local j = `j' + 1
 23.                 }
 24.         }
 25. }
.................................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...................
. 
. use `mc40', clear

. append using `mc120'

. append using `mc400'

. append using `mc3200'

. set more on

. 
. summarize

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
      ols401 |      2,000    1.203144    .7993404  -1.785458   5.638834
      ols402 |      2,000     .785408      .81823  -1.956265   4.554353
      ols403 |      2,000    1.204558    .5618499  -2.203009   3.219459
     ols1201 |      2,000     1.21256    .4507986  -.3383636    3.02066
     ols1202 |      2,000    .7971116    .4474605  -1.108759   2.191945
-------------+---------------------------------------------------------
     ols1203 |      2,000    1.194862    .3140514  -.0151045   2.698037
     ols4001 |      2,000    1.204704    .2502564   .0507631   2.022582
     ols4002 |      2,000     .798207    .2486852   -.053274   1.657804
     ols4003 |      2,000    1.198459    .1696646   .6263478    1.89912
    ols32001 |      2,000    1.198574    .0892634   .8880985    1.51627
-------------+---------------------------------------------------------
    ols32002 |      2,000    .8002305    .0869962   .3575139   1.069772
    ols32003 |      2,000    1.200591    .0618287   .9951386   1.413072

. 
. *drop x* 
. *drop den*
. 
. twoway (kdensity ols401, xline(1.2)) (kdensity ols32001)

. graph export 40-3200b1.pdf
file 40-3200b1.pdf saved as PDF format

. twoway (kdensity ols402, xline(0.8)) (kdensity ols32002)

. graph export 40-3200b2.pdf
file 40-3200b2.pdf saved as PDF format

. twoway (kdensity ols403, xline(1.2)) (kdensity ols32003)

. graph export 40-3200bintercept.pdf
file 40-3200bintercept.pdf saved as PDF format

. 
. 
. /* As the sample size increases, the distribution of the OLS estimates
> becomes more concentrated around the true parameter values.
> The empirical distributions become approximately normal despite
> the skewed χ² error term.
> This confirms the asymptotic normality of OLS.*/
. 
. *drop mse*
. gen mse401 = (ols401 - 1.2)^2
(6,000 missing values generated)

. gen mse32001 = (ols32001 - 1.2)^2
(6,000 missing values generated)

. sum mse401

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
      mse401 |      2,000    .6386355     1.07912   8.95e-09   19.70325

. sum mse32001

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    mse32001 |      2,000     .007966    .0115173   5.05e-11   .1000267

. di .6386355/.007966
80.170161

. 
. /*The MSE decreases as N increases, showing that the estimator
> converges to the true parameter value.*/
. 
. *prove √N–consistent
. sum ols401

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
      ols401 |      2,000    1.203144    .7993404  -1.785458   5.638834

. scalar sd401 = r(sd)

. 
. sum ols1201 

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
     ols1201 |      2,000     1.21256    .4507986  -.3383636    3.02066

. scalar sd1201 = r(sd)

. 
. sum ols4001

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
     ols4001 |      2,000    1.204704    .2502564   .0507631   2.022582

. scalar sd4001 = r(sd)

. 
. sum ols32001

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    ols32001 |      2,000    1.198574    .0892634   .8880985    1.51627

. scalar sd32001 = r(sd)

. 
. clear

. set obs 4
Number of observations (_N) was 0, now 4.

. 
. gen N = 40 in 1
(3 missing values generated)

. replace N = 120  in 2
(1 real change made)

. replace N = 400  in 3
(1 real change made)

. replace N = 3200 in 4
(1 real change made)

. 
. gen sd = .
(4 missing values generated)

. replace sd = sd401   in 1
(1 real change made)

. replace sd = sd1201  in 2
(1 real change made)

. replace sd = sd4001  in 3
(1 real change made)

. replace sd = sd32001 in 4
(1 real change made)

. 
. gen ln_sd = ln(sd)

. gen ln_N  = ln(N)

. 
. reg ln_sd ln_N

      Source |       SS           df       MS      Number of obs   =         4
-------------+----------------------------------   F(1, 2)         =  15704.25
       Model |  2.62818343         1  2.62818343   Prob > F        =    0.0001
    Residual |   .00033471         2  .000167355   R-squared       =    0.9999
-------------+----------------------------------   Adj R-squared   =    0.9998
       Total |  2.62851814         3  .876172714   Root MSE        =    .01294

------------------------------------------------------------------------------
       ln_sd | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        ln_N |  -.4987296   .0039798  -125.32   0.000    -.5158531   -.4816061
       _cons |    1.60465   .0233389    68.75   0.000     1.504231     1.70507
------------------------------------------------------------------------------

. 
. /*The estimated slope coefficient in the regression of ln(sd) on ln(N)
> is approximately -0.5.
> This confirms that the standard deviation of the OLS estimator
> decreases at rate 1/sqrt(N), consistent with √N-consistency.*/
. 
. *RESET
. clear all

. set seed 12345

. set obs 500
Number of observations (_N) was 0, now 500.

. 
. gen x1 = runiform()

. gen x2 = runiform()

. gen x3 = runiform()

. 
. foreach i of numlist 30 200{
  2. tempfile mc`i'
  3. 
. local j = 1
  4. while `j' <= 4000 {
  5.     quietly {
  6.         preserve
  7.         sample `i', count
  8.         noisily di in yellow "." _continue
  9.         
.         gen e = invnorm(uniform())
 10. 
.         gen y = 1 + x1 + x2 + x3 + e
 11.         
.         regress y x1 x2 x3
 12.         
.         * RESET test (manual version)
.         predict y_hat, xb
 13.         gen y_hat2 = y_hat^2
 14.         gen y_hat3 = y_hat^3
 15.         
.         regress y x1 x2 x3 y_hat2 y_hat3
 16.         
.         * F-test for joint significance
.         test y_hat2 y_hat3
 17.         
.         gen p_reset = r(p)
 18.         
.         gen r_10 = p_reset < 0.10
 19.         gen r_5  = p_reset < 0.05
 20.         gen r_1  = p_reset < 0.01
 21.         
.         collapse (mean) r_*
 22.         
.         if `j' > 1 {
 23.             append using `mc`i''
 24.         }
 25.         
.         save `mc`i'', replace
 26.         restore
 27.         local j = `j' + 1
 28.     }
 29. }
 30. }
.................................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...............................................................................
> ...................
. use `mc30', clear

. summarize r_10 r_5 r_1

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
        r_10 |      4,000       .0985    .2980268          0          1
         r_5 |      4,000      .04725    .2121997          0          1
         r_1 |      4,000        .008    .0890954          0          1

. 
. use `mc200', clear

. summarize r_10 r_5 r_1

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
        r_10 |      4,000      .09375     .291517          0          1
         r_5 |      4,000        .048     .213793          0          1
         r_1 |      4,000       .0085    .0918143          0          1

. 
. /*For N = 30, the empirical rejection frequencies are close to
> the nominal significance levels but may show small deviations
> due to finite sample effects.
> For N = 200, the empirical rejection rates are very close to
> the theoretical levels (10%, 5%, 1%).
> This indicates that the RESET test has correct asymptotic size.*/
. 
. log close
      name:  <unnamed>
       log:  C:\Users\demet\Desktop\project\Stata\Lectures\Lecture2\assignment1.l
> og
  log type:  text
 closed on:  23 Feb 2026, 10:59:24
---------------------------------------------------------------------------------
